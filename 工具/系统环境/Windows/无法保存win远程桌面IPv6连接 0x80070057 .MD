# 利用IPv6进行远程连接，不论保存凭据的复选框如何勾选，再次打开远程桌面工具时，发现用户密码都没有记住

> 远程桌面、远程连接、windows、IPv6

## 问题描述

1. 打开win远程桌面连接工具
2. 同IPv4一样，填好v6地址
3. 点击左下角显示选项，输入用户名
4. 点击连接
5. 在弹窗中输入密码，勾选允许保存我的凭据
6. 点击确定，完成连接
7. 再次打开远程桌面连接工具，发现只有计算机一栏显示了IPv6（把远程工具全部关闭再打开，还会发现这个IP都没了），却没有用户名
8. 输入用户名，点击连接，发现还是要输入密码

不用分析了，毛都不懂只能上网搜了

## 解决方案

受[这篇文章](https://www.cnblogs.com/xiaoruilin/p/15792016.html)启发：

1. 打开控制面板》用户账户》管理windows凭据
2. 点击“添加windows凭据”
3. 输入IPv6地址、用户名、密码，点击确定
4. 发现报错：“凭据管理器错误：无法保存此信息。请确保此信息正确无误并填写了所有必填字段。”
5. 点击显示详细信息，发现“错误代码：0x80070057 错误消息：参数错误。”
6. 搜索“凭据管理器
   80070057”，找到[微软官方文档](https://support.microsoft.com/zh-cn/topic/-%E4%BB%A3%E7%A0%81-0x80070057-%E5%8F%82%E6%95%B0%E4%B8%8D%E6%AD%A3%E7%A1%AE-%E5%BD%93%E6%82%A8%E5%B0%9D%E8%AF%95%E5%AF%B9%E6%96%87%E4%BB%B6%E7%9A%84%E6%98%BE%E7%A4%BA%E7%94%A8%E6%88%B7%E7%9A%84-%E6%9C%89%E6%95%88%E6%8E%A7%E5%88%B6-%E6%97%B6%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF-343394a6-1d65-802f-6e9e-91d94c661185)
7. 其中提到，通用命名约定 (UNC) 路径 \\server\share，猜测是IPv6不能作为其服务器地址，将这个地址改为test.pc，发现成功保存了这个凭据
8. 编辑host文件，将test.pc映射为要控制的IPv6地址
9. 重新打开远程桌面连接，在计算机一栏输入test.pc，发现下面的用户名已经变为刚刚保存凭据中的用户名，点击连接
10. 连接成功
